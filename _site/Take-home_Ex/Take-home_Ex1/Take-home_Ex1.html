<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jayexx Low">
<meta name="dcterms.date" content="2024-04-13">

<title>ISSS608-VAA - Take-home Ex1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS608-VAA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-ex" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Hands-on Ex</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-ex">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex1/Hands-on_Ex1.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex2/Hands-on_Ex2.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex3/Hands-on_Ex3a.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 3a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex3/Hands-on_Ex3b.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 3b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex4/Hands-on_Ex4a.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 4a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex4/Hands-on_Ex4b.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 4b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex4/Hands-on_Ex4c.html" rel="" target="">
 <span class="dropdown-text">Hands-on Ex 4c</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-ex" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">In-class Ex</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-ex">    
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex1/In-class_Ex1.html" rel="" target="">
 <span class="dropdown-text">In-class Ex 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex2/In-class_Ex2.html" rel="" target="">
 <span class="dropdown-text">In-class Ex 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class_Ex/In-class_Ex4/In-class_Ex4.html" rel="" target="">
 <span class="dropdown-text">In-class Ex 4</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-ex" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Take-home Ex</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-ex">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex1/Take-home_Ex1.html" rel="" target="">
 <span class="dropdown-text">Take-home Ex 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Take-home_Ex2/Take-home_Ex2.html" rel="" target="">
 <span class="dropdown-text">Take-home Ex 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
  <li><a href="#importing-the-data" id="toc-importing-the-data" class="nav-link" data-scroll-target="#importing-the-data">Importing the data</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#data-transformation" id="toc-data-transformation" class="nav-link" data-scroll-target="#data-transformation">Data Transformation</a></li>
  </ul></li>
  <li><a href="#data-visualisation-1-distribution-of-unit-sales-over-of-property-classification-variables" id="toc-data-visualisation-1-distribution-of-unit-sales-over-of-property-classification-variables" class="nav-link" data-scroll-target="#data-visualisation-1-distribution-of-unit-sales-over-of-property-classification-variables">Data Visualisation 1: Distribution of unit sales over of property classification variables</a></li>
  <li><a href="#data-visualisation-2-prevalence-of-distribution-patterns-over-past-quarters" id="toc-data-visualisation-2-prevalence-of-distribution-patterns-over-past-quarters" class="nav-link" data-scroll-target="#data-visualisation-2-prevalence-of-distribution-patterns-over-past-quarters">Data Visualisation 2: Prevalence of distribution patterns over past quarters</a></li>
  <li><a href="#data-visualisation-3-correlation-between-price-per-area-and-potential-interacting-factors" id="toc-data-visualisation-3-correlation-between-price-per-area-and-potential-interacting-factors" class="nav-link" data-scroll-target="#data-visualisation-3-correlation-between-price-per-area-and-potential-interacting-factors">Data Visualisation 3: Correlation between price per area and potential interacting factors</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Ex1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jayexx Low </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 13, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">May 6, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The private residential market in Singapore is a dynamic landscape, influenced by intricate socioeconomic factors and market trends. Separate from public housing, this sector has a unique set of policies and caters to a different market segment that comprises households with monthly incomes exceeding S$14,000, which includes not only Singaporean but also foreign buyers. Understanding this market’s nuances is crucial for both policymakers and potential market participants, whom are potential clients and consumers of our media company.</p>
<p>This study would thus delve into the private residential market transactions in Singapore during the first quarter of 2024 and its relations to past quarters. Through data visualisation and analytics, this study would scrutinize market trends &amp; patterns, geographical distributions and other potential interacting factors, aiming to unravel its complexities and provide insights on behaviour of Singapore’s private residential market and sub markets.</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>The key objective of this study are to leverage on visual analytics in the following:</p>
<ul>
<li>Data Visualisation 1: To explore the distribution of unit sales over of property classification variables</li>
<li>Data Visualisation 2: To discover the prevalence of these distribution patterns over the past quarters</li>
<li>Data Visualisation 3: To estimate the correlation between transacted price per area and potential interacting factors</li>
</ul>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting Started</h2>
<p>The code chunk below loads the following libraries:</p>
<ul>
<li>tidyverse: an amalgamation of libraries for data handling (including ggplot2, dplyr, tidyr, readr, tibble)</li>
<li>knitr: for creating dynamic html tables/reports</li>
<li>ggridges: extension of ggplot2 designed for plotting ridgeline plots</li>
<li>ggdist: extension of ggplot2 designed for visualising distribution and uncertainty,</li>
<li>colorspace: provides a broad toolbox for selecting individual colors or color palettes, manipulating these colors, and employing them in various kinds of visualisations.</li>
<li>ggrepel: provides geoms for ggplot2 to repel overlapping text labels.</li>
<li>ggthemes: provides additional themes, geoms, and scales for ggplot package</li>
<li>hrbrthemes: provides typography-centric themes and theme components for ggplot package</li>
<li>patchwork: preparing composite figure created using ggplot package</li>
<li>lubridate: for wrangling of date-time data</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, knitr, ggridges, ggdist, colorspace, ggrepel, ggthemes, hrbrthemes, patchwork, lubridate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data Preparation</h2>
<p>The main dataset, extracted from URA Realis database, contains the private residential sales transactions in Singapore in the first quarter of 2024 (2024 Q1). In addition, this study will also perform comparisons with the preceding 4 quarters, which is in fact 2023 Q1-Q4, similarly extracted from the URA Realis database.</p>
<section id="importing-the-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-data">Importing the data</h3>
<p>The code chunk below imports 5 quarters of Private Residential Transaction data into R environment by using read_csv() function of readr package, which is part of the tidyverse package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Realis24Q1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ResidentialTrx2024q1.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>Realis23Q4 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ResidentialTrx2023q4.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Realis23Q3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ResidentialTrx2023q3.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>Realis23Q2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ResidentialTrx2023q2.csv"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>Realis23Q1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/ResidentialTrx2023Q1.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Realis_merged <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Realis24Q1, Realis23Q4, Realis23Q3, Realis23Q2, Realis23Q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data-variables" class="level4">
<h4 class="anchored" data-anchor-id="data-variables">Data Variables</h4>
<p>To get a better understanding of the variables in the original dataset, the glimpse() function is used in the following code chunks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Realis24Q1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,902
Columns: 21
$ `Project Name`                &lt;chr&gt; "THE LANDMARK", "POLLEN COLLECTION", "SK…
$ `Transacted Price ($)`        &lt;dbl&gt; 2726888, 3850000, 2346000, 2190000, 1954…
$ `Area (SQFT)`                 &lt;dbl&gt; 1076.40, 1808.35, 1087.16, 807.30, 796.5…
$ `Unit Price ($ PSF)`          &lt;dbl&gt; 2533, 2129, 2158, 2713, 2453, 2577, 838,…
$ `Sale Date`                   &lt;chr&gt; "1-Jan-24", "1-Jan-24", "1-Jan-24", "1-J…
$ Address                       &lt;chr&gt; "173 CHIN SWEE ROAD #22-11", "34 POLLEN …
$ `Type of Sale`                &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New…
$ `Type of Area`                &lt;chr&gt; "Strata", "Land", "Strata", "Strata", "S…
$ `Area (SQM)`                  &lt;dbl&gt; 100.0, 168.0, 101.0, 75.0, 74.0, 123.0, …
$ `Unit Price ($ PSM)`          &lt;dbl&gt; 27269, 22917, 23228, 29200, 26405, 27741…
$ `Nett Price($)`               &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-", …
$ `Property Type`               &lt;chr&gt; "Condominium", "Terrace House", "Apartme…
$ `Number of Units`             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ Tenure                        &lt;chr&gt; "99 yrs from 28/08/2020", "99 yrs from 0…
$ `Completion Date`             &lt;chr&gt; "Uncompleted", "Uncompleted", "Uncomplet…
$ `Purchaser Address Indicator` &lt;chr&gt; "Private", "N.A", "HDB", "N.A", "Private…
$ `Postal Code`                 &lt;chr&gt; "169878", "807233", "469657", "118992", …
$ `Postal District`             &lt;chr&gt; "03", "28", "16", "05", "21", "21", "28"…
$ `Postal Sector`               &lt;chr&gt; "16", "80", "46", "11", "59", "58", "79"…
$ `Planning Region`             &lt;chr&gt; "Central Region", "North East Region", "…
$ `Planning Area`               &lt;chr&gt; "Outram", "Serangoon", "Bedok", "Queenst…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Realis_merged)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 26,806
Columns: 21
$ `Project Name`                &lt;chr&gt; "THE LANDMARK", "POLLEN COLLECTION", "SK…
$ `Transacted Price ($)`        &lt;dbl&gt; 2726888, 3850000, 2346000, 2190000, 1954…
$ `Area (SQFT)`                 &lt;dbl&gt; 1076.40, 1808.35, 1087.16, 807.30, 796.5…
$ `Unit Price ($ PSF)`          &lt;dbl&gt; 2533, 2129, 2158, 2713, 2453, 2577, 838,…
$ `Sale Date`                   &lt;chr&gt; "1-Jan-24", "1-Jan-24", "1-Jan-24", "1-J…
$ Address                       &lt;chr&gt; "173 CHIN SWEE ROAD #22-11", "34 POLLEN …
$ `Type of Sale`                &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New…
$ `Type of Area`                &lt;chr&gt; "Strata", "Land", "Strata", "Strata", "S…
$ `Area (SQM)`                  &lt;dbl&gt; 100.0, 168.0, 101.0, 75.0, 74.0, 123.0, …
$ `Unit Price ($ PSM)`          &lt;dbl&gt; 27269, 22917, 23228, 29200, 26405, 27741…
$ `Nett Price($)`               &lt;chr&gt; "-", "-", "-", "-", "-", "-", "-", "-", …
$ `Property Type`               &lt;chr&gt; "Condominium", "Terrace House", "Apartme…
$ `Number of Units`             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ Tenure                        &lt;chr&gt; "99 yrs from 28/08/2020", "99 yrs from 0…
$ `Completion Date`             &lt;chr&gt; "Uncompleted", "Uncompleted", "Uncomplet…
$ `Purchaser Address Indicator` &lt;chr&gt; "Private", "N.A", "HDB", "N.A", "Private…
$ `Postal Code`                 &lt;chr&gt; "169878", "807233", "469657", "118992", …
$ `Postal District`             &lt;chr&gt; "03", "28", "16", "05", "21", "21", "28"…
$ `Postal Sector`               &lt;chr&gt; "16", "80", "46", "11", "59", "58", "79"…
$ `Planning Region`             &lt;chr&gt; "Central Region", "North East Region", "…
$ `Planning Area`               &lt;chr&gt; "Outram", "Serangoon", "Bedok", "Queenst…</code></pre>
</div>
</div>
<p>Based on the output above, the both the 2024 Q1 and merged datasets have a total of 21 variables, as well as 4.9k and 26.8k rows respectively.</p>
</section>
</section>
<section id="data-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h3>
<p>Before data transformation, the cleanliness of the data set is first ascertained by checking for missing and duplicate data.</p>
<section id="missing-data" class="level4">
<h4 class="anchored" data-anchor-id="missing-data">Missing Data</h4>
<p>Based on the output from Glimpse(), it is noted that there were missing values denoted by “-” for variables such as Nett Price, hence, these values are first converted to NA before we check for NA values as a whole. Noting that there are valid values such as dates that also contain “-” and multibyte values such as ENCHANTe~ in the project name col, the code uses regex to filter for “-” values instead.</p>
<p>colSums() and is.NA() functions are thus used to search for missing values as a whole for the 2024 Q1 dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert "-" values with no characters before and after to NA</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>Realis24Q1 <span class="ot">&lt;-</span> Realis24Q1 <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"^-$"</span>, .), <span class="cn">NA</span>, .))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Find the number of missing values for each col</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(Realis24Q1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Project Name        Transacted Price ($) 
                          0                           0 
                Area (SQFT)          Unit Price ($ PSF) 
                          0                           0 
                  Sale Date                     Address 
                          0                           0 
               Type of Sale                Type of Area 
                          0                           0 
                 Area (SQM)          Unit Price ($ PSM) 
                          0                           0 
              Nett Price($)               Property Type 
                       4896                           0 
            Number of Units                      Tenure 
                          0                           0 
            Completion Date Purchaser Address Indicator 
                        118                           0 
                Postal Code             Postal District 
                          0                           0 
              Postal Sector             Planning Region 
                          0                           0 
              Planning Area 
                          0 </code></pre>
</div>
</div>
<p>The same step is repeated for the merged data set in the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert "-" values with no characters before and after to NA</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Realis_merged <span class="ot">&lt;-</span> Realis_merged <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"^-$"</span>, .), <span class="cn">NA</span>, .))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Find the number of missing values for each col</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(Realis_merged))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Project Name        Transacted Price ($) 
                          0                           0 
                Area (SQFT)          Unit Price ($ PSF) 
                          0                           0 
                  Sale Date                     Address 
                          0                           0 
               Type of Sale                Type of Area 
                          0                           0 
                 Area (SQM)          Unit Price ($ PSM) 
                          6                           0 
              Nett Price($)               Property Type 
                      26770                           0 
            Number of Units                      Tenure 
                          0                           0 
            Completion Date Purchaser Address Indicator 
                        682                           0 
                Postal Code             Postal District 
                          0                           0 
              Postal Sector             Planning Region 
                          0                           0 
              Planning Area 
                          0 </code></pre>
</div>
</div>
<p>From the above, the 2 variables of Nett Price ($) and Completion date contain missing values.</p>
</section>
<section id="check-for-duplicates" class="level4">
<h4 class="anchored" data-anchor-id="check-for-duplicates">Check for duplicates</h4>
<p>Using duplicated(), duplicate values in the 2024 Q1 data set of are identified and extracted in the following code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Realis24Q1[<span class="fu">duplicated</span>(Realis24Q1), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 21
# ℹ 21 variables: Project Name &lt;chr&gt;, Transacted Price ($) &lt;dbl&gt;,
#   Area (SQFT) &lt;dbl&gt;, Unit Price ($ PSF) &lt;dbl&gt;, Sale Date &lt;chr&gt;,
#   Address &lt;chr&gt;, Type of Sale &lt;chr&gt;, Type of Area &lt;chr&gt;, Area (SQM) &lt;dbl&gt;,
#   Unit Price ($ PSM) &lt;dbl&gt;, Nett Price($) &lt;chr&gt;, Property Type &lt;chr&gt;,
#   Number of Units &lt;dbl&gt;, Tenure &lt;chr&gt;, Completion Date &lt;chr&gt;,
#   Purchaser Address Indicator &lt;chr&gt;, Postal Code &lt;chr&gt;,
#   Postal District &lt;chr&gt;, Postal Sector &lt;chr&gt;, Planning Region &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>The same step is repeated with the merged data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Realis_merged[<span class="fu">duplicated</span>(Realis_merged), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 21
# ℹ 21 variables: Project Name &lt;chr&gt;, Transacted Price ($) &lt;dbl&gt;,
#   Area (SQFT) &lt;dbl&gt;, Unit Price ($ PSF) &lt;dbl&gt;, Sale Date &lt;chr&gt;,
#   Address &lt;chr&gt;, Type of Sale &lt;chr&gt;, Type of Area &lt;chr&gt;, Area (SQM) &lt;dbl&gt;,
#   Unit Price ($ PSM) &lt;dbl&gt;, Nett Price($) &lt;chr&gt;, Property Type &lt;chr&gt;,
#   Number of Units &lt;dbl&gt;, Tenure &lt;chr&gt;, Completion Date &lt;chr&gt;,
#   Purchaser Address Indicator &lt;chr&gt;, Postal Code &lt;chr&gt;,
#   Postal District &lt;chr&gt;, Postal Sector &lt;chr&gt;, Planning Region &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>From the above, there were no duplicates found.</p>
</section>
<section id="check-for-outliers" class="level4">
<h4 class="anchored" data-anchor-id="check-for-outliers">Check for outliers</h4>
<p>As a pre-cursor to visualise the distribution of unit sales and correlation of property classification factors with Unit Price (PSF), a univariate analysis is done using a box plot to identify the existence of outliers in both dependent variables - (1) No.&nbsp;of Units and (2) Unit Price (PSF) as follows.</p>
<ol type="1">
<li>No.&nbsp;of units</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Realis 2024 Q1 dataset</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Realis merged dataset</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate frequency counts for each value of "Number of Units"</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>freq_counts <span class="ot">&lt;-</span> Realis24Q1 <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the histogram and Display frequency counts as text</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Realis24Q1, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> freq_counts, <span class="fu">aes</span>(<span class="at">label =</span> n, <span class="at">y =</span> n), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate frequency counts for each value of "Number of Units"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>freq_counts <span class="ot">&lt;-</span> Realis_merged <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the histogram and Display frequency counts as text</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Realis_merged, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> freq_counts, <span class="fu">aes</span>(<span class="at">label =</span> n, <span class="at">y =</span> n), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>From the above, the data is extremely concentrated at 1 unit per transaction, with only a very small minority of less than 1% of the units that belonged to multiple-unit transactions.</p>
<ol start="2" type="1">
<li>Unit Price (PSF)</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Realis 2024 Q1 dataset</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Realis merged dataset</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the box plot</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Realis24Q1, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y=</span><span class="st">" "</span>)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y=</span><span class="st">"Realis 2024 Q1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the box plot</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Realis_merged, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y=</span><span class="st">" "</span>)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y=</span><span class="st">"Realis merged"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>From the above, outliers are not particularly distinct as there are quite a sizable number trailing out from the right tail of the box plot.</p>
</section>
</section>
<section id="data-transformation" class="level3">
<h3 class="anchored" data-anchor-id="data-transformation">Data Transformation</h3>
<p>Based on the findings above, the significance of each variable, the conclusions drawn and transformations required are summarised as follows.</p>
<table class="table">
<colgroup>
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 2%">
<col style="width: 28%">
<col style="width: 57%">
<col style="width: 1%">
</colgroup>
<tbody>
<tr class="odd">
<td><h1 id="sn">S/N</h1></td>
<td><h1 id="variable">Variable</h1></td>
<td><h1 id="data-type">Data Type</h1></td>
<td><h1 id="description">Description</h1></td>
<td><h1 id="remarks">Remarks</h1></td>
<td></td>
</tr>
<tr class="even">
<td>1</td>
<td>Project Name</td>
<td>chr</td>
<td>Private Residential Development Project Name</td>
<td>No missing values suggests that all property transactions in the data set belong to a private project development</td>
<td></td>
</tr>
<tr class="odd">
<td>2</td>
<td>Transacted Price ($)</td>
<td>num</td>
<td>Transacted Property Sale Price</td>
<td>Since price is already known to be strongly correlated to Area, Unit Price (aka Price per Area) will potentially provide greater insights to multiple stakeholders.</td>
<td></td>
</tr>
<tr class="even">
<td>3</td>
<td>Area (SQFT)</td>
<td>num</td>
<td>Property Floor Area (aka Unit Size) in SQFT</td>
<td>Since price is already known to be strongly correlated to Area, Unit Price (aka Price per Area) will potentially provide greater insights to multiple stakeholders.</td>
<td></td>
</tr>
<tr class="odd">
<td>4</td>
<td>Unit Price ($ PSF)</td>
<td>num</td>
<td>Sale Price per Floor Area in SQFT</td>
<td>PSF is chosen over PSM as a indicator for Price per area as a dependent variable for Data Visualisation 3.</td>
<td></td>
</tr>
<tr class="even">
<td>5</td>
<td>Sale Date</td>
<td>chr</td>
<td>Date of Sales Transaction</td>
<td><p>Sale date will be required for Data Visualisation 2 to provide granularity on time-wise trends across the quarters.</p>
<p>Data type will need to be changed to Date instead of chr.</p></td>
<td></td>
</tr>
<tr class="odd">
<td>6</td>
<td>Address</td>
<td>chr</td>
<td>Detailed line of address</td>
<td>Address is closely related to other geographical variables, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
<tr class="even">
<td>7</td>
<td>Type of Sale</td>
<td>chr</td>
<td><p>Differentiates between</p>
<ul>
<li><p>sales of a new property (directly from the developer)</p></li>
<li><p>secondhand sales of unbuilt property (aka subsale)</p></li>
<li><p>resale of existing property</p></li>
</ul></td>
<td>Type of sale will be a property classification and potential interacting variable that will be used in Data Visualisation 1, 2 and 3</td>
<td></td>
</tr>
<tr class="odd">
<td>8</td>
<td>Type of Area</td>
<td>chr</td>
<td><p>Differentiates whether the land under the property is:</p>
<ul>
<li><p>shared in a development project (strata)</p></li>
<li><p>solely owned by the property owner</p></li>
</ul></td>
<td>Type of Area is closely related to property type, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
<tr class="even">
<td>9</td>
<td>Area (SQM)</td>
<td>num</td>
<td>Property Floor Area (aka Unit Size) in SQM</td>
<td>Since price is already known to be strongly correlated to Area, Price per Area will potentially provide greater insights to multiple stakeholders.</td>
<td></td>
</tr>
<tr class="odd">
<td>10</td>
<td>Unit Price ($ PSM)</td>
<td>num</td>
<td>Sale Price per Floor Area in SQM</td>
<td>PSF is chosen over PSM as a indicator for Price per area as a dependent variable for Data visualisation 3.</td>
<td></td>
</tr>
<tr class="even">
<td>11</td>
<td>Nett Price($)</td>
<td>chr</td>
<td>Price taking away officially recorded discounts and grants by URA</td>
<td>Missing Values found for this variable in majority of rows, and since it has a similar purpose as transaction price, the latter will be used instead.</td>
<td></td>
</tr>
<tr class="odd">
<td>12</td>
<td>Property Type</td>
<td>chr</td>
<td><p>Differentiates the property type into:</p>
<ul>
<li><p>Condominium</p></li>
<li><p>Terrace</p></li>
<li><p>Semi-detached</p></li>
<li><p>Detached</p></li>
</ul></td>
<td>Property Type will be a property classification and potential interacting variable that will be used in Data Visualisation 1, 2 and 3</td>
<td></td>
</tr>
<tr class="even">
<td>13</td>
<td>Number of Units</td>
<td>num</td>
<td>Number of units sold in the single transaction</td>
<td><p>Number of units is chosen as the dependent variable for Data Visualisation 1 and 2 to explore the distribution of unit sales by property classifications.</p>
<p>To minimise complexity in the visualisation, the multiple-unit transactions which constitutes a small minority of the data, will be filtered away as outliers, which could be revisited in a future study.</p></td>
<td></td>
</tr>
<tr class="odd">
<td>14</td>
<td>Tenure</td>
<td>chr</td>
<td>Tenure period granted to the property owner over the land starting from the date of completion</td>
<td><p>Tenure will be a property classification and potential interacting variable that will be used in Data Visualisation 1, 2 and 3</p>
<p>To contain the wide variation in representations, the values will be binned such that all lease years less than 900 years will be classified as “Leasehold”, while values above will be classified as “999years/Freehold”</p></td>
<td></td>
</tr>
<tr class="even">
<td>15</td>
<td>Completion Date</td>
<td>chr</td>
<td>Year when the first building project is deemed completed upon grant of the tenure of the land.</td>
<td><p>The age of the property can be derived from this variable which will be a property classification and potential interacting variable that will be used in Data Visualisation 1, 2 and 3, however, missing values were found for this variable in a small minority of rows.</p>
<p>Hence data transformation is required to remove rows with missing values, derive property age with 2024 as a reference point, and replace “Uncompleted” properties as 0 in age.</p></td>
<td></td>
</tr>
<tr class="odd">
<td>16</td>
<td>Purchaser Address Indicator</td>
<td>chr</td>
<td>Type of residence of the purchaser’s address which he/she need not necessarily own</td>
<td>This could be a variable to determine if the purchaser is upgrading, downgrading or perhaps buying a 2nd property, but since there isn’t enough info on whether the buyer is actually selling their current property, significant assumptions need to be made.</td>
<td></td>
</tr>
<tr class="even">
<td>17</td>
<td>Postal Code</td>
<td>chr</td>
<td>Geographical code which is unique to the building address of transacted property</td>
<td>Postal Code is closely related to other geographical variables, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
<tr class="odd">
<td>18</td>
<td>Postal District</td>
<td>chr</td>
<td>Geographical code which is unique to the postal district of transacted property, total of 28 districts in Singapore</td>
<td>Postal District is closely related to other geographical variables, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
<tr class="even">
<td>19</td>
<td>Postal Sector</td>
<td>chr</td>
<td>Geographical code unique to postal sector of transacted property, which is a sub area of district, total of 81 sectors in Singapore</td>
<td>Postal Sector is closely related to other geographical variables, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
<tr class="odd">
<td>20</td>
<td>Planning Region</td>
<td>chr</td>
<td>Geographical region of transacted property, total of 5 regions - Central, North, North East, East and West.</td>
<td>Planning Region is the least complex amongst the geographical variables, and hence is selected as an ideal property classification and potential interacting variable that will be used in Data Visualisation 1, 2 and 3</td>
<td></td>
</tr>
<tr class="even">
<td>21</td>
<td>Planning Area</td>
<td>chr</td>
<td>Name of geographical area of transacted property, total of 55 areas in Singapore</td>
<td>Planning Area is closely related to other geographical variables, but is not selected as the preferred variable to be used in this study.</td>
<td></td>
</tr>
</tbody>
</table>
<p>Based on the above, the data transformations required in preparation for the Data Visualisation is done and subsequently inspected using glimpse() in the following code chunk.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For version control, start by defining new transformed datasets as copies of original dataset</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm <span class="ot">&lt;-</span> Realis24Q1</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm <span class="ot">&lt;-</span> Realis_merged</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Sale date to date data type</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">dmy</span>(Realis24Q1<span class="sc">$</span><span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">dmy</span>(Realis_merged<span class="sc">$</span><span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># For Completion Date, (1) filter out missing values, (2) Calculate age of property caa 2024, (3) set Uncompleted as age 0</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm <span class="ot">&lt;-</span> Realis24Q1_trfm <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>))</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm <span class="ot">&lt;-</span> Realis_merged_trfm <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>[Realis24Q1_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Uncompleted"</span>] <span class="ot">&lt;-</span> <span class="dv">2024</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>[Realis_merged_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Uncompleted"</span>] <span class="ot">&lt;-</span> <span class="dv">2024</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm<span class="sc">$</span>Property_Age <span class="ot">&lt;-</span> <span class="dv">2024</span> <span class="sc">-</span> <span class="fu">as.numeric</span>(Realis24Q1_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm<span class="sc">$</span>Property_Age <span class="ot">&lt;-</span> <span class="dv">2024</span> <span class="sc">-</span> <span class="fu">as.numeric</span>(Realis_merged_trfm<span class="sc">$</span><span class="st">`</span><span class="at">Completion Date</span><span class="st">`</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co"># For number of units, filter out the multiple-property transactions as outliers</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm <span class="ot">&lt;-</span> Realis24Q1_trfm <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm <span class="ot">&lt;-</span> Realis_merged_trfm <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">1</span>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co"># For Tenure, bin values into Leasehold and 999yrs/Freehold</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>Realis24Q1_trfm <span class="ot">&lt;-</span> Realis24Q1_trfm <span class="sc">%&gt;%</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tenure =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"^Freehold"</span>, Tenure) <span class="sc">~</span> <span class="st">"999yrs/Freehold"</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"^9[0-9]{2}"</span>, Tenure) <span class="sc">~</span> <span class="st">"999yrs/Freehold"</span>,</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Leasehold"</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm <span class="ot">&lt;-</span> Realis_merged_trfm <span class="sc">%&gt;%</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Tenure =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"^Freehold"</span>, Tenure) <span class="sc">~</span> <span class="st">"999yrs/Freehold"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"^9[0-9]{2}"</span>, Tenure) <span class="sc">~</span> <span class="st">"999yrs/Freehold"</span>,</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Leasehold"</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Review transformed dataset</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Realis24Q1_trfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,783
Columns: 22
$ `Project Name`                &lt;chr&gt; "THE LANDMARK", "POLLEN COLLECTION", "SK…
$ `Transacted Price ($)`        &lt;dbl&gt; 2726888, 3850000, 2346000, 2190000, 1954…
$ `Area (SQFT)`                 &lt;dbl&gt; 1076.40, 1808.35, 1087.16, 807.30, 796.5…
$ `Unit Price ($ PSF)`          &lt;dbl&gt; 2533, 2129, 2158, 2713, 2453, 2577, 838,…
$ `Sale Date`                   &lt;date&gt; 2024-01-01, 2024-01-01, 2024-01-01, 202…
$ Address                       &lt;chr&gt; "173 CHIN SWEE ROAD #22-11", "34 POLLEN …
$ `Type of Sale`                &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New…
$ `Type of Area`                &lt;chr&gt; "Strata", "Land", "Strata", "Strata", "S…
$ `Area (SQM)`                  &lt;dbl&gt; 100.0, 168.0, 101.0, 75.0, 74.0, 123.0, …
$ `Unit Price ($ PSM)`          &lt;dbl&gt; 27269, 22917, 23228, 29200, 26405, 27741…
$ `Nett Price($)`               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Property Type`               &lt;chr&gt; "Condominium", "Terrace House", "Apartme…
$ `Number of Units`             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ Tenure                        &lt;chr&gt; "Leasehold", "Leasehold", "Leasehold", "…
$ `Completion Date`             &lt;chr&gt; "2024", "2024", "2024", "2024", "2024", …
$ `Purchaser Address Indicator` &lt;chr&gt; "Private", "N.A", "HDB", "N.A", "Private…
$ `Postal Code`                 &lt;chr&gt; "169878", "807233", "469657", "118992", …
$ `Postal District`             &lt;chr&gt; "03", "28", "16", "05", "21", "21", "28"…
$ `Postal Sector`               &lt;chr&gt; "16", "80", "46", "11", "59", "58", "79"…
$ `Planning Region`             &lt;chr&gt; "Central Region", "North East Region", "…
$ `Planning Area`               &lt;chr&gt; "Outram", "Serangoon", "Bedok", "Queenst…
$ Property_Age                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 20, 11, 9, 11, 8, 8, 1…</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Realis_merged_trfm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 26,117
Columns: 22
$ `Project Name`                &lt;chr&gt; "THE LANDMARK", "POLLEN COLLECTION", "SK…
$ `Transacted Price ($)`        &lt;dbl&gt; 2726888, 3850000, 2346000, 2190000, 1954…
$ `Area (SQFT)`                 &lt;dbl&gt; 1076.40, 1808.35, 1087.16, 807.30, 796.5…
$ `Unit Price ($ PSF)`          &lt;dbl&gt; 2533, 2129, 2158, 2713, 2453, 2577, 838,…
$ `Sale Date`                   &lt;date&gt; 2024-01-01, 2024-01-01, 2024-01-01, 202…
$ Address                       &lt;chr&gt; "173 CHIN SWEE ROAD #22-11", "34 POLLEN …
$ `Type of Sale`                &lt;chr&gt; "New Sale", "New Sale", "New Sale", "New…
$ `Type of Area`                &lt;chr&gt; "Strata", "Land", "Strata", "Strata", "S…
$ `Area (SQM)`                  &lt;dbl&gt; 100.0, 168.0, 101.0, 75.0, 74.0, 123.0, …
$ `Unit Price ($ PSM)`          &lt;dbl&gt; 27269, 22917, 23228, 29200, 26405, 27741…
$ `Nett Price($)`               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Property Type`               &lt;chr&gt; "Condominium", "Terrace House", "Apartme…
$ `Number of Units`             &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ Tenure                        &lt;chr&gt; "Leasehold", "Leasehold", "Leasehold", "…
$ `Completion Date`             &lt;chr&gt; "2024", "2024", "2024", "2024", "2024", …
$ `Purchaser Address Indicator` &lt;chr&gt; "Private", "N.A", "HDB", "N.A", "Private…
$ `Postal Code`                 &lt;chr&gt; "169878", "807233", "469657", "118992", …
$ `Postal District`             &lt;chr&gt; "03", "28", "16", "05", "21", "21", "28"…
$ `Postal Sector`               &lt;chr&gt; "16", "80", "46", "11", "59", "58", "79"…
$ `Planning Region`             &lt;chr&gt; "Central Region", "North East Region", "…
$ `Planning Area`               &lt;chr&gt; "Outram", "Serangoon", "Bedok", "Queenst…
$ Property_Age                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 20, 11, 9, 11, 8, 8, 1…</code></pre>
</div>
</div>
</section>
</section>
<section id="data-visualisation-1-distribution-of-unit-sales-over-of-property-classification-variables" class="level2">
<h2 class="anchored" data-anchor-id="data-visualisation-1-distribution-of-unit-sales-over-of-property-classification-variables">Data Visualisation 1: Distribution of unit sales over of property classification variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create bar charts for each categorical variables</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Property Type</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Units by Property Type"</span>, <span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Property Type"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>plot2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Planning Region</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightgreen"</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Units by Planning Region"</span>, <span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Planning Region"</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>plot3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Type of Sale</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightcoral"</span>) <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Units by Type of Sale"</span>, <span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Type of Sale"</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>plot4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Number of Units</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Tenure</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightpink"</span>) <span class="sc">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Units by Tenure"</span>, <span class="at">x =</span> <span class="st">"Number of Units"</span>, <span class="at">y =</span> <span class="st">"Tenure"</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a histogram for Property_Age</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>plot5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> Property_Age)) <span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histogram of Property Age"</span>, <span class="at">x =</span> <span class="st">"Property Age"</span>)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine plots using operators</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>(plot1 <span class="sc">/</span> plot2) <span class="sc">|</span> (plot3 <span class="sc">/</span> plot4) <span class="sc">|</span> plot5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
<p>Taking the above at face value, the possible combination of preferences of buyers in the 5 property classifications can be inferred, as follows.</p>
<ul>
<li><p>For Property Type, Condominiums, followed by Apartments and Executive Condominiums are seems to be more preferred.</p></li>
<li><p>For Planning Region, the Central Region, followed by Western and North Eastern Regions are preferred.</p></li>
<li><p>For Type of Sale, Resale is most preferred followed by New Sale</p></li>
<li><p>For Tenure, Leasehold is preferred over 999yrs/freehold</p></li>
<li><p>For Property Age, newer properties are preferred over older properties.</p></li>
</ul>
<p>While the above inferences could be made, it does not equate to a causality relationship between these individual variables and unit sales, as there could be multiple other confounding variables that explains one or more of these observations, such as the following.</p>
<ul>
<li><p>For example, the overall property price and hence affordability could be an underlying reason that these preferences are surfacing, which could relate to property type, type of sale and tenure, where the most preferred options tend to align with the most affordable private properties in Singapore as well.</p></li>
<li><p>Another confounding variable could be supply or availability of such categories of properties for sale, which could relate to the property type, type of sale and tenure, since the most preferred options are also the most abundant categories of private properties in Singapore.</p></li>
</ul>
</section>
<section id="data-visualisation-2-prevalence-of-distribution-patterns-over-past-quarters" class="level2">
<h2 class="anchored" data-anchor-id="data-visualisation-2-prevalence-of-distribution-patterns-over-past-quarters">Data Visualisation 2: Prevalence of distribution patterns over past quarters</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign quarters based on date ranges</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm <span class="ot">&lt;-</span> Realis_merged_trfm <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">case_when</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">month</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>), <span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">&amp;</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>) <span class="sc">==</span> <span class="dv">2023</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">month</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>), <span class="dv">4</span>, <span class="dv">6</span>) <span class="sc">&amp;</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>) <span class="sc">==</span> <span class="dv">2023</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">month</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>), <span class="dv">7</span>, <span class="dv">9</span>) <span class="sc">&amp;</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>) <span class="sc">==</span> <span class="dv">2023</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">month</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>), <span class="dv">10</span>, <span class="dv">12</span>) <span class="sc">&amp;</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>) <span class="sc">==</span> <span class="dv">2023</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">month</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>), <span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">&amp;</span> <span class="fu">year</span>(<span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>) <span class="sc">==</span> <span class="dv">2024</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>Realis_merged_trfm<span class="sc">$</span>Quarter <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Realis_merged_trfm<span class="sc">$</span>Quarter)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create ridge plot</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>plot6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis_merged_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> Quarter)) <span class="sc">+</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of Unit Price ($ PSF) by Quarter"</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Quarter"</span>)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>plot7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis_merged_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Property_Age</span><span class="st">`</span>, <span class="at">y =</span> Quarter)) <span class="sc">+</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of Property Age by Quarter"</span>,</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Property Age"</span>, <span class="at">y =</span> <span class="st">"Quarter"</span>)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>plot8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis_merged_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Sale Date</span><span class="st">`</span>, <span class="at">y =</span> Quarter)) <span class="sc">+</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>() <span class="sc">+</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Density of Sale Date by Quarter"</span>,</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Sale Date"</span>, <span class="at">y =</span> <span class="st">"Quarter"</span>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine plots using operators</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>plot6<span class="sc">/</span>plot7<span class="sc">/</span>plot8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the plots above, broad similarities can be observed across the quarters, elaborated as follows.</p>
<ul>
<li><p>For Unit Price (PSF), all quarters displayed a right skew in the distribution of sales, with the peaks notably aligned at around $1,300/SQFT. This suggests that the PSF for private property sales transaction had maintained fairly consistent over the 5 quarters, with some slight deviation.</p></li>
<li><p>For Property age, all quarters displayed a right skew in the distribution of sales, with the peaks notably aligned close to 0. This suggests that across the 5 quarters, preferences for newer properties also maintained as a consistent trend.</p></li>
</ul>
<p>On the other hand, there were notable differences for sales distribution over time, where by peaks were observed at random parts of each of the 5 quarters. A closer look at the timing of the peaks and comparing with external data sources, it is found that these peaks in fact align with the 1st 2 weekends of new project launches. Rather than seasonal, the trend in sales peaks are most significantly driven by new project launches.</p>
</section>
<section id="data-visualisation-3-correlation-between-price-per-area-and-potential-interacting-factors" class="level2">
<h2 class="anchored" data-anchor-id="data-visualisation-3-correlation-between-price-per-area-and-potential-interacting-factors">Data Visualisation 3: Correlation between price per area and potential interacting factors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>plot9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Property Type</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Property Type"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>plot10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Planning Region</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Planning Region"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>plot11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Tenure</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Tenure"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>plot12 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Property_Age</span><span class="st">`</span>)) <span class="sc">+</span>  <span class="co"># Corrected the aes function</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Property Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x
[1] "Unit Price ($ PSF)"

$y
[1] "Property Age"

attr(,"class")
[1] "labels"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>plot13 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Realis24Q1_trfm, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Unit Price ($ PSF)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Transacted Price ($)</span><span class="st">`</span>)) <span class="sc">+</span>  <span class="co"># Corrected the aes function</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Unit Price ($ PSF)"</span>, <span class="at">y =</span> <span class="st">"Transacted Price ($)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x
[1] "Unit Price ($ PSF)"

$y
[1] "Transacted Price ($)"

attr(,"class")
[1] "labels"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine plots using operators</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>plot9 <span class="sc">/</span> plot10 <span class="sc">/</span> plot11 <span class="sc">/</span> plot12 <span class="sc">/</span> plot13 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Take-home_Ex1_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="1440"></p>
</div>
</div>
<p>Based on the above plots, there are some visible similarities and also relative rankings for Unit Prices (in PSF) between the different categories of private properties.</p>
<ul>
<li><p>For Property Type, Terrace, Semi-detached, Detached and Condominiums seem to have very similar means at around $1,700/PSF, whereas Apartments have the notably highest mean than the rest, and Executive Condominiums seems to have the lowest. While the observed for executive condominium is within expectation, since it did afterall start out at a cheaper price as part of the governments efforts to meet the masstige market needs, the observations for the rest bring an interesting insight, and is worth exploring further beyond this study.</p></li>
<li><p>For Planning Region, interestingly, the rankings are exactly the same as that of the unit sales, which supports the possibility that this ranking could perhaps be indicative of the a strong preference for location of private properties among buyers in the first quarter of 2024.</p></li>
<li><p>For Tenure, the observation brings no surprise that 999yrs/freehold is more expensive in Unit Price as compared to leasehold, which is opposite of the rankings for unit sales.</p></li>
<li><p>For Property Age, the scatter plot and smoothened curve seems to suggest that there is at most a weak linearity relationship between property age and unit Price.</p></li>
<li><p>For Transacted prices, the scatter plot and smoothened curve similarly seems to suggest that there is at most a weak linearity relationship between Transacted prices and unit Price.</p></li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li>https://quarto.org/</li>
<li>https://lubridate.tidyverse.org/</li>
<li>https://www.ura.gov.sg/</li>
<li>https://r4va.netlify.app/</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>